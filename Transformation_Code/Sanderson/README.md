# Sanderson Transformation
Sanderson.R is a script for extracting features specified in the [Wildlife Insights Batch Upload Template](https://docs.google.com/spreadsheets/d/1iEcHs0Y49W5hx7aoMSFge_1-Q_VfMdl8d56x27heuNY/edit#gid=1839754633) from images stored with the [Sanderson et al structure](https://esajournals.onlinelibrary.wiley.com/doi/full/10.1890/0012-9623-91.3.352). This script is developed to be run using the RStudio environment.

---

## System Requirements

Requires Perl 5.004 or later

---
## Key Steps

### Before running

Write a CSV of all species included in the project and their corresponding English Common Name or Wildlife Insights Taxonomy ID.

| photocode |   common_name |
| :---:     |   :----:      |
| Baas      |   ringtail    |
| Cala      |   coyote      |
| Urci      |   Grey Fox    |
| ...       |   ...         |

For animals missing common names in the WI Taxonomy, use the generic family/genus/order and request an addition to the Wildlife Insights Taxonomy.
If the species is absent or missing information, [request](https://airtable.com/shrpbVfBPahYkyJmp) an addition to the Wildlife Insights Taxonomy.


Set working directory to the __Wildlife-Insights----Data-Migration__ folder

### Within the Script

Set the appropriate values to the all following project variables describing your project. Project variables are:

- `output_path`: Absolute path for the desired output directory location
- `project_path` : Absolute path of the project directory
- `encoding_path`: Absolute path of the encoding CSV described above
- `blank_name`: How blank images are labelled on the species level
- `identifier_name`: Name of the person who identified the majority of the photos
- `project_id` : An internal identification for the project. It should be a relatively short name that makes the project unique among other projects for the user or organization
- `project_name`: A short name that uniquely identifies the project dataset and relates to project code (400 chars)
- `project_short_name`: A short name for you project that can only be 43 characters. It will be used for display purposes when a short name is a better fit.
- `project_objectives`: What is your study objective?
- `project_species`: Is your study objective to monitor or focus on single or multiple species? Valid values are: "__Individual__" and "__Multiple__". If "Individual", list the species in the "project_species_individual" variable
- `project_sensor_layout`: What is the sensor layout or sampling design within the study area? Valid values are: "__Systematic__", "__Randomized__", "__Convenience__", "__Targeted__", "__Unknown__"
- `project_bait_use`: Were sensors baited at all or some of my deployment locations? Valid values are: "__Yes__", "__Some__", "__No__". If "Yes", specify the bait type in the "project_bait_type" variable
- `project_stratification`: Are your sensors distributed along different habitat types, legal zones (e.g. protected area vs. not protected) or other biophysical features (e.g. elevation, rainfall, etc.)? Valid values are: "__Yes__", "__No__" If "Yes", list the strata in the "project_stratification_type" variable
- `project_sensor_method`: Is your sampling based on motion sensor detection only or also time lapse? Valid values are: "__Sensor Detection__", "__Time lapse__", "__Both__"
- `project_blank_images`: Were blank images removed from this dataset? Valid values are: "__Yes__", "__Some__", "__No__"
- `project_sensor_cluster`: Were your sensors setup in pairs or clusters (groups of sensors)? Possible values are: "__Yes__", "__No__"
- `project_admin`: The name of the project administrator
- `project_admin_email`: Project administrators email--  255 chars maximum
- `project_admin_organization`: Administration organization
- `embargo`: Length of embargo in months 0-24
- `metadata_license`: The license you would like associated for the project metadata. Metadata includes all the information in this data dictionary along with any derived products that come from it. Valid values are: "__CC0__", "__CC-BY__"
- `image_license`: The license you would like associated to all of the media (currently images but will include other media types in the future) that you will be uploading into Wildlife Insights. Valid values are: "__CC0__", "__CC-BY__", "__CC-BY-NC__"

Also, optionally set the appropriate values to some, all, or none of the following project variables describing your project. Optional variables are:

- `project_species_individual`: If "individual", which species? List the species using the WI Unique ID.
- `project_sensor_layout_targeted_type`
- `project_bait_type`: If "yes", what bait? Valid values are: "__None__", "__Scent__", "__Meat__", "__Visual__", "__Acoustic__", "__Other__"
- `project_stratification_type`: If "yes", list the strata
- `project_individual_animals`
- `initiative_id`: Initiative Unique ID generated by Wildlife Insights when an Initiative is created.

### After Running

Many of the output CSV files are still incomplete after running the migration script. Therefore, manual input into the CSVs are required to complete the CSV files to meet the batch upload template. The following required variables will be incomplete:

#### From the Deployment CSV

- `bait_type`: Type of bait (if any) that was used with camera; standardized list with No Bait and Other Bait options: Valid values are: "__None__", "__Scent__", "__Meat__", "__Visual__", "__Acoustic__", "__Other__"
- `feature_type`: Type of feature (if any) that camera deployment is associated with. Valid Values are: "__None__", "__Road paved__", "__Road dirt__", "__Trail hiking__", "__Trail game__", "__Road underpass__", "__Road overpass__", "__Road bridge__", "__Culvert__", "__Burrow__", "__Nest site__", "__Carcass__", "__Water source__", "__Fruiting tree__", "__Other__"
- `quiet_period`: Time specified between shutter triggers when activity in the sensor will not trigger the shutter. Specified in seconds.
- `camera_functioning`: Details the status of the camera after the named deployment; standardized list. Valid values are: "__Camera Functioning__", "__Unknown Failure__, "__Vandalism__, "__Theft__", "__Memory Card__", "__Film Failure__", "__Camera Hardware Failure__", "__Wildlife Damage__"
- `sensor_height`: What height were generally used to deploy the sensor? If user selection = "other", please describe. Valid values are: "__Chest height__", "__Knee height__", "__Canopy__", "__Unknown__", "__Other__"
- `sensor_orientation`: What angle were generally used to deploy the sensor? Valid values are: "__Parallel__", "__Pointed Downward__", "__Varies__", "__Unknown__", "__Other__"
